name: Deploy VibeCheck (Self-Hosted ZIP)

on:
  push:
    branches: [ master ]

jobs:
  deploy:
    runs-on: self-hosted
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Deploy to Target Directory
        run: |
          echo "ğŸš€ [1/2] æ­£åœ¨åŒæ­¥ä»£ç åˆ°ç”Ÿäº§ç›®å½•..."
          TARGET_PATH="/home/ubuntu/VibeCheck"
          
          # åˆ›å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
          mkdir -p $TARGET_PATH
          
          # æ’é™¤å¹²æ‰°æ–‡ä»¶ï¼ŒåŒæ­¥ä»£ç åˆ°ç”Ÿäº§ä½ç½®
          rsync -av --delete --exclude '.git' --exclude '.github' ./ $TARGET_PATH/
          
          cd $TARGET_PATH
          echo "ğŸš€ [2/2] æ‰§è¡Œéƒ¨ç½²è„šæœ¬..."
          chmod +x deploy.sh
          ./deploy.sh
          echo "ğŸ‰ éƒ¨ç½²å…¨éƒ¨å®Œæˆï¼"
